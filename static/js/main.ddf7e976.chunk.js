(this["webpackJsonprotator-prototype"]=this["webpackJsonprotator-prototype"]||[]).push([[0],{12:function(e,t,r){e.exports=r(19)},17:function(e,t,r){},18:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(6),i=r.n(s),o=(r(17),r(7)),l=r(8),c=r(9),u=r(11),m=r(2),d=(r(18),r(10)),h=r(1),b=function(e,t){var r,n=Object(m.a)(e.members);try{for(n.s();!(r=n.n()).done;){if(r.value.id===t)throw new Error("Duplicated member ID: ".concat(t))}}catch(s){n.e(s)}finally{n.f()}var a=f(e.members);return Object(h.a)({},e,{members:[].concat(Object(d.a)(e.members),[{id:t,count:a<1?0:a-1,lastAssigned:0,prevAssigned:0}])})},p=function(e,t){var r=v(e.members);return Object(h.a)({},y(e,r,t),{skippedMemberIds:[]})},v=function(e){var t=e.filter((function(e){return 0===e.lastAssigned}));if(t.length>0)return t[0];var r=g(e),n=e.filter((function(e){return e.count===r}));if(n.length>0)return n.sort((function(e,t){return e.lastAssigned<t.lastAssigned?-1:e.lastAssigned>t.lastAssigned?1:0}))[0];throw new Error("Not implemented")},f=function(e){var t,r=-1,n=Object(m.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.count>r&&(r=a.count)}}catch(s){n.e(s)}finally{n.f()}return r},g=function(e){var t,r=1/0,n=Object(m.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.count<r&&(r=a.count)}}catch(s){n.e(s)}finally{n.f()}return r},y=function(e,t,r){var n=E(t,r),a=e.members.map((function(e){return Object(h.a)({},e.id===t.id?n:e)}));return Object(h.a)({},e,{members:a,currentMember:n,prevMember:e.currentMember})},E=function(e,t){return Object(h.a)({},e,{count:e.count+1,lastAssigned:t.getTime(),prevAssigned:e.lastAssigned})},M=function(e,t){if("undefined"===typeof e.currentMember)throw new Error("not implemented");if(e.skippedMemberIds.length>=e.members.length-1)throw new Error("No one is remaining to assign next");var r=Object(h.a)({},e),n=e.currentMember,a=(r=Object(h.a)({},r,{members:A(r.members,n),skippedMemberIds:r.skippedMemberIds.concat(n.id)})).members.filter((function(e){var t,n=Object(m.a)(r.skippedMemberIds);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.id===a)return!1}}catch(s){n.e(s)}finally{n.f()}return!0})),s=v(a);return y(r,s,t)},A=function(e,t){return e.map((function(e){return e.id===t.id?Object(h.a)({},e,{count:e.count-1,lastAssigned:e.prevAssigned,prevAssigned:0}):e}))},k=function(e){if("undefined"===typeof e.currentMember)throw new Error("There is no previous state to revert to");if("undefined"===typeof e.prevMember)throw new Error("There is no previous state to revert to");return{members:A(e.members,e.currentMember),currentMember:e.prevMember,prevMember:void 0,skippedMemberIds:e.skippedMemberIds}},w=function(e,t){var r,n=Object(m.a)(e.skippedMemberIds);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(t.id===a)return!0}}catch(s){n.e(s)}finally{n.f()}return!1},S=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(e){var n;Object(o.a)(this,r),n=t.call(this,e);var a=localStorage.getItem("rotatorState");return n.state="string"===typeof a?JSON.parse(a):{newMemberId:"",rotator:{members:[],currentMember:void 0,prevMember:void 0,skippedMemberIds:[]},error:void 0},n}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",null,"Rotator Prototype"),a.a.createElement("form",{onSubmit:this.handleAdd.bind(this)},a.a.createElement("div",null,"New Member:",a.a.createElement("input",{type:"text",value:this.state.newMemberId,onChange:this.handleChangeNewMemberName.bind(this)}),a.a.createElement("input",{type:"submit",value:"Add"})),a.a.createElement("div",null,a.a.createElement("input",{type:"button",value:"Assign Next",onClick:this.handleAssignNext.bind(this)}),a.a.createElement("input",{type:"button",value:"Skip And Assign Next",onClick:this.handleSkipAndAssignNext.bind(this)}),a.a.createElement("input",{type:"button",value:"Revert Assignment",onClick:this.handleRevertAssignment.bind(this)}),a.a.createElement("input",{type:"button",value:"Save",onClick:this.handleSave.bind(this)}),a.a.createElement("input",{type:"button",value:"Clear",onClick:this.handleClear.bind(this)})),a.a.createElement("div",null,"Last Error: ",this.state.error),a.a.createElement("div",{style:{float:"left"}},a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,"ID"),a.a.createElement("td",null,"Count"),a.a.createElement("td",null,"Last Assigned"))),a.a.createElement("tbody",null,this.state.rotator.members.map((function(t,r){return a.a.createElement("tr",{className:e.state.rotator&&e.state.rotator.currentMember&&(e.state.rotator.currentMember.id===t.id?"current":w(e.state.rotator,t)?"skipped":""),key:r},a.a.createElement("td",null,t.id),a.a.createElement("td",null,t.count),a.a.createElement("td",null,0===t.lastAssigned?"-":new Date(t.lastAssigned).toISOString()))}))))),a.a.createElement("div",{style:{float:"left"}},a.a.createElement("pre",{className:"react-state"},a.a.createElement("code",null,JSON.stringify(this.state,null,2)))))))}},{key:"handleChangeNewMemberName",value:function(e){this.setState({newMemberId:e.target.value})}},{key:"handleAdd",value:function(e){e.preventDefault();try{""!==this.state.newMemberId&&this.setState({newMemberId:"",rotator:b(this.state.rotator,this.state.newMemberId)})}catch(t){this.setState({error:t.message})}}},{key:"handleAssignNext",value:function(e){e.preventDefault();try{this.setState({rotator:p(this.state.rotator,new Date)})}catch(t){this.setState({error:t.message})}}},{key:"handleSkipAndAssignNext",value:function(e){e.preventDefault();try{this.setState({rotator:M(this.state.rotator,new Date)})}catch(t){this.setState({error:t.message})}}},{key:"handleRevertAssignment",value:function(e){e.preventDefault();try{this.setState({rotator:k(this.state.rotator)})}catch(t){this.setState({error:t.message})}}},{key:"handleSave",value:function(e){e.preventDefault(),localStorage.setItem("rotatorState",JSON.stringify(this.state))}},{key:"handleClear",value:function(e){e.preventDefault(),this.setState({rotator:{members:[],currentMember:void 0,prevMember:void 0,skippedMemberIds:[]}})}}]),r}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.ddf7e976.chunk.js.map